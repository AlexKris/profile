[General]
# --- é€šç”¨ ---
# > å¢žå¼ºç‰ˆ Wi-Fi åŠ©ç†
wifi-assist = false
# > æ··åˆç½‘ç»œ
all-hybrid = false
# > æ¸¸æˆä¼˜åŒ–
udp-priority = true
# > å¢žå¼ºç‰ˆ Wi-Fi åŠ©ç†
internet-test-url = http://wifi.vivo.com.cn/generate_204
# > ä»£ç†æµ‹é€Ÿ URL
proxy-test-url = http://1.1.1.1/generate_204
# > æµ‹è¯•è¶…æ—¶ï¼ˆç§’ï¼‰
test-timeout = 5
# > è‡ªå®šä¹‰ GeoIP æ•°æ®åº“
# geoip-maxmind-url = https://github.com/Hackl0us/GeoIP2-CN/raw/release/Country.mmdb
geoip-maxmind-url = https://raw.githubusercontent.com/Loyalsoldier/geoip/release/Country.mmdb
# > IPv6
ipv6 = false
# > IPv6 VIF
ipv6-vif = auto
# > å…è®¸ Wi-Fi è®¿é—®
allow-wifi-access = false
# > å…è®¸ä¸ªäººçƒ­ç‚¹è®¿é—®
allow-hotspot-access = false
# > ios HTTP ä»£ç†æœåŠ¡å™¨ç«¯å£
wifi-access-http-port = 6152
# > ios SOCKS5 ä»£ç†æœåŠ¡å™¨ç«¯å£
wifi-access-socks5-port = 6153
# > mac HTTP ä»£ç†æœåŠ¡å™¨ç«¯å£
http-listen = 0.0.0.0:6152
# > mac SOCKS5 ä»£ç†æœåŠ¡å™¨ç«¯å£
socks5-listen = 0.0.0.0:6153
# > è¿œç¨‹æŽ§åˆ¶å™¨
external-controller-access = chris@127.0.0.1:6170
# > HTTP API
http-api = chris@127.0.0.1:6171
# > HTTPS
http-api-tls = false
# > Web æŽ§åˆ¶å™¨
http-api-web-dashboard = false
# > å…¼å®¹æ¨¡å¼
compatibility-mode = 0
# > è·³è¿‡ä»£ç†
skip-proxy = 127.0.0.1, 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, 100.64.0.0/10, localhost, *.local, seed-sequoia.siri.apple.com, sequoia.apple.com, passenger.t3go.cn, www.baidu.com, yunbusiness.ccb.com, wxh.wo.cn, gate.lagou.com, www.abchina.com.cn, mbank.psbc.com, www.10010.com
# > æŽ’é™¤ç®€å•ä¸»æœºå
exclude-simple-hostnames = true
# > åŒ…å«æ‰€æœ‰ç½‘ç»œè¯·æ±‚
include-all-networks = false
# > åŒ…å«æœ¬åœ°ç½‘ç»œè¯·æ±‚
include-local-networks = false
# > UDP IP é˜²æ³„æ¼
# å¦‚æžœæ²¡æœ‰ä»£ç†æœåŠ¡å™¨æ”¯æŒ UDP è½¬å‘ï¼Œå¯ä¿®æ”¹ä¸ºã€Œ direct ã€æˆ–æ³¨é‡Šä¸‹æ¡ï¼Œä½†éœ€æ³¨æ„åŒä¸€ç›®æ ‡ä¸»æœºå TCP è¯·æ±‚ä¸Ž UDP è¯·æ±‚çš„æºåœ°å€ä¸åŒæ‰€é€ æˆçš„éšç§åŠå®‰å…¨é£Žé™©ã€‚
udp-policy-not-supported-behaviour = reject
# > æ—¥å¿—çº§åˆ«
loglevel = notify
# > å½“é‡åˆ° REJECT ç­–ç•¥æ—¶è¿”å›žé”™è¯¯é¡µ
show-error-page-for-reject = true
# > Always Real IP Hosts
always-real-ip = *.msftconnecttest.com, *.msftncsi.com, *.srv.nintendo.net, *.stun.playstation.net, xbox.*.microsoft.com, *.xboxlive.com, *.logon.battlenet.com.cn, *.logon.battle.net, stun.l.google.com
# > Hijack DNS
hijack-dns = *:53
# > TCP Force HTTP Hosts
# force-http-engine-hosts = example.com:80, <ip-address>:0
# > VIF Excluded Routes
# tun-excluded-routes = 239.255.255.250/32
# > VIF Included Routes
# tun-included-routes = 192.168.1.12/32
# > DNS æœåŠ¡å™¨
dns-server = 223.5.5.5, 119.29.29.29, 114.114.114.114, system
# > åŠ å¯†çš„DNSæœåŠ¡å™¨ (å¦‚æ— å¿…è¦ä¸å»ºè®®ä½¿ç”¨)
encrypted-dns-server = https://223.5.5.5/dns-query, https://dns.alidns.com/dns-query
# ä½¿åŠ å¯† DNS è¯·æ±‚é€šè¿‡ä»£ç†ç­–ç•¥æ‰§è¡Œ
# encrypted-dns-follow-outbound-mode = false
# > å…³é—­ DOH çš„æœåŠ¡ç«¯è¯ä¹¦éªŒè¯
# encrypted-dns-skip-cert-verification = true
# > ä»Ž /etc/hosts ä¸­è¯»å– DNS è®°å½•
read-etc-hosts = true
# > ä»£ç†è¯·æ±‚æœ¬åœ° DNS æ˜ å°„
use-local-host-item-for-proxy = false
tls-provider = openssl

[Proxy Group]
Proxy = select, DIRECT, sub1, sub2
Streaming = select, Proxy, HK, TW, JP
StreamingSE = select, DIRECT, HK, TW
OpenAI = select, US
Apple = select, DIRECT, Proxy
Microsoft = select, DIRECT, Proxy
Google = select, US
AdBlock = select, REJECT, DIRECT
Final = select, Proxy, DIRECT
HK = select, policy-regex-filter=(ðŸ‡­ðŸ‡°)|(æ¸¯)|(Hong)|(HK), no-alert=0, hidden=0, include-all-proxies=0, include-other-group="sub1, sub2"
TW = url-test, policy-regex-filter=(ðŸ‡¨ðŸ‡³)|(å°)|(Tai)|(TW), no-alert=0, hidden=0, include-all-proxies=0, include-other-group="sub1, sub2"
US = select, policy-regex-filter=(ðŸ‡ºðŸ‡¸)|(ç¾Ž)|(States)|(US), no-alert=0, hidden=0, include-all-proxies=0, include-other-group="sub1, sub2"
JP = url-test, policy-regex-filter=(ðŸ‡¯ðŸ‡µ)|(æ—¥)|(Japan)|(JP), no-alert=0, hidden=0, include-all-proxies=0, include-other-group="sub1, sub2"
SG = url-test, policy-regex-filter=(ðŸ‡¸ðŸ‡¬)|(æ–°)|(Singapore)|(SG), no-alert=0, hidden=0, include-all-proxies=0, include-other-group="sub1, sub2"
sub1 = select, policy-path=, update-interval=0, interval=600, timeout=3, no-alert=0, hidden=0, include-all-proxies=0
sub2 = select, policy-path=, update-interval=0, interval=600, timeout=3, no-alert=0, hidden=0, include-all-proxies=0

[Rule]
# > Safari è®¿é—®é˜²è·³è½¬ App
DOMAIN,app-site-association.cdn-apple.com,REJECT
# > ç»•è¿‡ App ä¼ä¸šè¯ä¹¦è¿‡æœŸ
DOMAIN,ocsp.apple.com,REJECT
# > TestFlight å•†åº—
DOMAIN,beta.apple.com,Proxy
DOMAIN,testflight.apple.com,Proxy
# > Boxjs ä»£ç†
DOMAIN-KEYWORD,jsdelivr.net,Proxy
# > Sub-Store çš„ Web é¡µé¢
DOMAIN-SUFFIX,vercel.app,Proxy
# > Nexitally
DOMAIN-SUFFIX,myguyo.xyz,DIRECT
# > Tag
DOMAIN,tagcdnsub.work,DIRECT
# > Spotify
DOMAIN-SUFFIX,ap.spotify.com,DIRECT
# > Google
DOMAIN,mtalk.google.com,DIRECT
DOMAIN,mobile-gtalk.l.google.com,DIRECT
DOMAIN,alt1-mtalk.google.com,DIRECT
DOMAIN,alt2-mtalk.google.com,DIRECT
DOMAIN,alt3-mtalk.google.com,DIRECT
DOMAIN,alt4-mtalk.google.com,DIRECT
DOMAIN,alt5-mtalk.google.com,DIRECT
DOMAIN,alt6-mtalk.google.com,DIRECT
DOMAIN,alt7-mtalk.google.com,DIRECT
DOMAIN,alt8-mtalk.google.com,DIRECT
DOMAIN,alt9-mtalk.google.com,DIRECT
DOMAIN-SUFFIX,mobile-gtalk.l.google.com,DIRECT
# > HTTP3/QUIC åè®®åŸºäºŽ UDPï¼Œéƒ¨åˆ†åœ°åŒº ISP æˆ–çº¿è·¯ UDP å®¹æ˜“å—åˆ°å¹²æ‰°æˆ–é™é€Ÿï¼Œå±è”½æŽ‰ä»¥é˜»æ­¢ HTTP 3 æµé‡çš„ UDP æµé‡ï¼Œå¼ºåˆ¶å›žé€€åˆ° TCPã€‚
# > REJECT-NO-DROP è¡¨ç¤ºä¸ä½¿ç”¨é»˜è®¤çš„è‡ªåŠ¨ä¸¢åŒ…é€»è¾‘ï¼Œè¿™æ · Surge æ¯æ¬¡éƒ½ä¼šè¿”å›ž ICMP Port Unreachableï¼Œåº”ç”¨ä¼šç«‹åˆ»å›žé€€è€Œä¸æ˜¯ç­‰è¶…æ—¶ã€‚
# > é˜»æ­¢æ‰€æœ‰ UDP æµé‡è¿›å…¥443ç«¯å£ï¼Œä½¿ HTTP3 è¯·æ±‚å›žè½åˆ° TCP æµé‡ã€‚
AND,((PROTOCOL,UDP), (DEST-PORT,443)),REJECT-NO-DROP
# > Client
PROCESS-NAME,UUBooster,DIRECT
# > Download
PROCESS-NAME,aria2c,DIRECT
PROCESS-NAME,fdm,DIRECT
PROCESS-NAME,Folx,DIRECT
PROCESS-NAME,NetTransport,DIRECT
PROCESS-NAME,Thunder,DIRECT
PROCESS-NAME,Transmission,DIRECT
PROCESS-NAME,uTorrent,DIRECT
PROCESS-NAME,WebTorrent,DIRECT
PROCESS-NAME,WebTorrent Helper,DIRECT
# > External Resources Update
AND,((DOMAIN,raw.githubusercontent.com), (DOMAIN-SUFFIX,github.io), (USER-AGENT,Surge/*)),Proxy
# > å±è”½ YouTube çš„ UDP
AND,((PROTOCOL,UDP), (DOMAIN-SUFFIX,googlevideo.com), (DOMAIN-SUFFIX,gvt1.com)),REJECT-NO-DROP
# > å±è”½ Instagram çš„ UDP
AND,((PROTOCOL,UDP), (DOMAIN-SUFFIX,cdninstagram.com)),REJECT
# > Unbreak åŽç»­è§„åˆ™ä¿®æ­£
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Unbreak.list,DIRECT
# DOMAIN-SET,https://raw.githubusercontent.com/Loyalsoldier/surge-rules/release/private.txt,DIRECT
# > Advertising å¹¿å‘Š
# RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Guard/Advertising.list,AdBlock
# DOMAIN-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Guard/AdvertisingPlus.list,AdBlock
# DOMAIN-SET,https://raw.githubusercontent.com/Loyalsoldier/surge-rules/release/reject.txt,AdBlock
# > å¹¿å‘Šç»ˆç»“
DOMAIN-SET,https://raw.githubusercontent.com/axcsz/Collect/master/Surge/Ruleset/Guard/fenliuAD.list,AdBlock
# DOMAIN-SET,https://raw.githubusercontent.com/privacy-protection-tools/anti-AD/master/anti-ad-surge2.txt,AdBlock
# > Privacy éšç§
# RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Guard/Privacy.list,AdBlock
# > Hijacking è¿è¥å•†åŠ«æŒæˆ–æ¶æ„ç½‘ç«™
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Guard/Hijacking.list,AdBlock
# RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Hijacking/Hijacking.list,AdBlock
# > system
RULE-SET,SYSTEM,DIRECT
# > Netflix
# RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/StreamingMedia/Video/Netflix.list,Streaming
# > Disney+
# RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/StreamingMedia/Video/DisneyPlus.list,Streaming
# > Yotube
# RULE-SET,https://github.com/DivineEngine/Profiles/blob/master/Surge/Ruleset/StreamingMedia/Music/YouTube-Music.list,Streaming
# RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/StreamingMedia/Video/YouTube.list,Streaming
# > Spotify
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/StreamingMedia/Music/Spotify.list,Streaming
# > Bahamut
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/StreamingMedia/Video/Bahamut.list,TW
# > Streaming å›½é™…æµåª’ä½“æœåŠ¡
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/StreamingMedia/Streaming.list,Streaming
# > StreamingSE ä¸­å›½æµåª’ä½“æœåŠ¡ï¼ˆé¢å‘æµ·å¤–ç‰ˆæœ¬ï¼‰
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/StreamingMedia/StreamingSE.list,StreamingSE
# > OpenAI
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/OpenAI/OpenAI.list,OpenAI
# > GoogleVoice
# RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Extra/Google/GoogleVoice.list,Google
# > Google
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Google/Google.list,Google
# > OneDrive
# RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Extra/Microsoft/OneDrive.list,Proxy
# > Microsoft
# RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Microsoft/Microsoft.list,Microsoft
# > é˜»æ­¢ç”µæŠ¥é¢‘ç¹è¯·æ±‚
# AND,((PROCESS-NAME,Telegram), (OR,((IP-CIDR,0.0.0.0/8), (IP-CIDR,224.0.0.0/4)))),REJECT
# > Telegram
# RULE-SET,https://raw.githubusercontent.com/Loyalsoldier/surge-rules/release/telegramcidr.txt,Proxy
# RULE-SET,https://raw.githubusercontent.com/VirgilClyne/GetSomeFries/main/ruleset/ASN.Telegram.list,Proxy
# > è…¾è®¯ WeChat ASN
# IP-ASN,132203,DIRECT,no-resolve
# > è…¾è®¯ WeChat
# RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Extra/WeChat.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/WeChat/WeChat.list,DIRECT
# > Apple
# RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Extra/Apple/Apple.list,Apple
DOMAIN-SET,https://raw.githubusercontent.com/Loyalsoldier/surge-rules/release/icloud.txt,Apple
DOMAIN-SET,https://raw.githubusercontent.com/Loyalsoldier/surge-rules/release/apple.txt,Apple
# > Global å…¨çƒåŠ é€Ÿ
# RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Global.list,Proxy
DOMAIN-SET,https://raw.githubusercontent.com/Loyalsoldier/surge-rules/release/proxy.txt,Proxy
# > China ç›´è¿ž
# RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/China.list,DIRECT
# DOMAIN-SET,https://raw.githubusercontent.com/Loyalsoldier/surge-rules/release/direct.txt,DIRECT
# RULE-SET,https://raw.githubusercontent.com/Loyalsoldier/surge-rules/release/cncidr.txt,DIRECT
# > China ASN
RULE-SET,https://raw.githubusercontent.com/VirgilClyne/GetSomeFries/auto-update/ruleset/ASN.China.list,DIRECT
# > Surge çš„è‡ªåŠ¨ REJECT ä¿æŠ¤ä¸¢åŒ… é˜²æ­¢åº”ç”¨å¾ªçŽ¯è¯·æ±‚
IP-CIDR,0.0.0.0/32,REJECT,no-resolve
# > å±€åŸŸç½‘
RULE-SET,LAN,DIRECT
# > GeoIP China
GEOIP,CN,DIRECT
# > DNS æŸ¥è¯¢å¤±è´¥èµ° Final è§„åˆ™
FINAL,Final,dns-failed

[Host]
# > Firebase Cloud Messaging
mtalk.google.com = 108.177.125.188
# > Google Dl
dl.google.com = server:119.29.29.29
dl.l.google.com = server:119.29.29.29
update.googleapis.com = server:119.29.29.29
# > PlayStation
*.dl.playstation.net = server:119.29.29.29
# > æ·˜å®
*.taobao.com = server:223.5.5.5
# > å¤©çŒ«
*.tmall.com = server:223.5.5.5
# > é˜¿é‡Œäº‘
*.alicdn.com = server:223.5.5.5
*.aliyun.com = server:223.5.5.5
# > è…¾è¿…
*.tencent.com = server:119.29.29.29
# > è…¾è®¯QQ
*.qq.com = server:119.29.29.29
# > å¾®ä¿¡
*.weixin.com = server:119.29.29.29
*.qpic.cn = server:119.29.29.29
# > äº¬ä¸œ
*.jd.com = server:119.29.29.29
# > å“”å“©å“”å–±
*.bilibili.com = server:119.29.29.29
hdslb.com = server:119.29.29.29
# > ç½‘æ˜“
*.163.com = server:119.29.29.29
*.126.com = server:119.29.29.29
*.126.net = server:119.29.29.29
*.127.net = server:119.29.29.29
*.netease.com = server:119.29.29.29
# > å°ç±³
*.mi.com = server:119.29.29.29
*.xiaomi.com = server:119.29.29.29
# > Router Admin Panel
# - Ubiquiti Amplifi Router
amplifi.lan = server:syslib
# - Synology Router
router.synology.com = server:syslib
# - Razer Sila Router
sila.razer.com = server:syslib
# - Asus Router
router.asus.com = server:syslib
# - Netgear Router
routerlogin.net = server:syslib
# - Netgear Obri Router
orbilogin.com = server:syslib
# - Linksys Router
www.LinksysSmartWiFi.com = server:syslib
# - Linksys Router
LinksysSmartWiFi.com = server:syslib
# - Linksys Router
myrouter.local = server:syslib
# - Xiaomi Mi WiFi Router
www.miwifi.com = server:syslib
# - Xiaomi Mi WiFi Router
miwifi.com = server:syslib
# - Huawei Router
mediarouter.home = server:syslib
# - TP-Link Router
tplogin.cn = server:syslib
# - TP-Link Router
tplinklogin.net = server:syslib
# - MERCURY Router
melogin.cn = server:syslib
# - FAST Router
falogin.cn = server:syslib
# > Apple
apple.com = server:223.5.5.5
*icloud.com = server:223.5.5.5
*icloud.com.cn = server:223.5.5.5
*testflight.apple.com = server:8.8.4.4

[Header Rewrite]
^https?:\/\/.*\.zhihu\.com\/(question|topic) header-replace User-Agent "osee2unifiedRelease/4432 osee2unifiedReleaseVersion/7.8.0 Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mo    bile/15E148"

[SSID Setting]
TYPE:CELLULAR tfo-behaviour=force-disabled

[MITM]
skip-server-cert-verify = true
tcp-connection = true
h2 = true
ca-passphrase = 
ca-p12 = 

[Script]
# > Flush DNS, show the DNS delay and server.
flushDNS = type=generic,timeout=10,script-path=https://raw.githubusercontent.com/zZPiglet/Task/master/asset/flushDNS.js,argument=icon=wand.and.stars.inverse&color=#3d3d5b

[Panel]
flushDNS = script-name=flushDNS,update-interval=-1

