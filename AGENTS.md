# AGENTS.md

## 交互准则
- 默认使用简体中文回答，直言不讳。
- 遇到错误设计或实现，必须直接指出并提出改进意见。
- 偏好优雅、简洁、可维护的方案，而非复杂但“理论正确”的方案。
- 尊重事实，避免迁就错误假设。

## 核心哲学
- **好品味**
  - 链表删除原则：10 行带判断不如 4 行无条件分支。
  - 消除边界情况：优先通过重写简化，而不是增加条件判断。
  - 优雅胜于正确：在经验允许下，优雅实现优先于“死板正确”。
- **实用主义**
  - 代码要服务于现实问题，而非理论或论文。
  - 避免过度设计，解决实际需求。
- **简洁执念**
  - 超过 3 层缩进的代码属于失败设计。
  - 函数需短小精悍，只做一件事并做好。
  - 修复 bug 的程序必须更简洁，而非更复杂。

## 并行执行规则
- **允许并行**
  - 独立文件读取（Read）
  - 独立模式搜索（Grep）
  - 无依赖的 Bash 命令
  - 无依赖的 MCP 工具调用
- **禁止并行**
  - 修改同一文件的操作
  - 有上下游依赖的任务

## 开发原则
- **代码质量**
  - KISS: 保持简单直观。
  - YAGNI: 不实现暂时用不到的功能。
  - DRY: 消除重复。
  - SOLID: 遵循面向对象设计原则。
  - 优雅执念: 代码须达到“论文级优雅”。
- **数据库设计**
  - 无外键约束：一致性由应用层维护。
  - 软删除优先：使用 `deleted_at` 字段代替物理删除。
  - 冗余换性能：适度字段冗余，避免复杂关联查询。
  - 分表思维：预留水平扩展能力。
  - 精准索引：基于查询模式设计索引。
- **工作方式**
  - 优先使用 MCP 工具完成任务（context7、filesystem、memory 等）。
  - 需求明确：直接实施；需求模糊：先确认再执行。
  - Never break userspace：改动不能破坏现有功能。
  - 第一性原理：从本质角度分析和设计方案。

## 执行规则
- 独立操作必须并行执行，除非存在依赖关系。
- 错误必须修复，不能通过忽略或规避绕过。
- 编译完整性和测试通过优先。
- 需求模糊时必须确认；需求明确时直接输出完整实现。
- 每个改动必须说明遵循的原则，并给出代码示例。

## Git 提交约定
- 生成提交信息时不包含 AI 或 Codex 的标识。
- 推荐使用 Conventional Commits 格式（feat, fix, docs, refactor, test, chore）。
- 提交信息应简洁明了，必要时附加上下文。
